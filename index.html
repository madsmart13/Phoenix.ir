<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ Ú¯ÛŒÙ…ÛŒÙ†Ú¯</title>
<style>
  body { font-family: 'Poppins', sans-serif; background:#111; color:#fff; text-align:center; padding:50px;}
  h1 { color:#ff8000; text-shadow:0 0 10px #ff8000;}
  .counter { font-size:1.8em; margin:20px 0; color:#fff;}
  input { padding:10px; margin:8px; border:2px solid #ff8000; background:#222; color:#fff; border-radius:8px;}
  button { background:#ff8000; color:#000; border:none; padding:10px 20px; border-radius:10px; font-size:1em; cursor:pointer; transition:0.3s;}
  button:hover { background:#ffa533; box-shadow:0 0 10px #ff8000;}
</style>
</head>
<body>

<h1>ğŸ® Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ Ú¯ÛŒÙ…ÛŒÙ†Ú¯</h1>
<p class="counter">Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ú¯Ø§Ù†: <span id="count">...</span> Ù†ÙØ±</p>

<input type="text" id="name" placeholder="Ù†Ø§Ù… Ø´Ù…Ø§">
<input type="text" id="telegram" placeholder="Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… ÛŒØ§ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†">
<br>
<button onclick="register()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø± Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ</button>

<p id="msg"></p>

<script>
const api = "https://script.google.com/macros/s/AKfycbwp62CynlRJILFUG13lTbB0h328DT9qgluMWXJBOBBG9LsK65A_RReG3WLGO7Go9okj3A/exec";

function getCount() {
  fetch(api)
    .then(r => r.text())
    .then(t => document.getElementById('count').innerText = t);
}

function register() {
  const name = document.getElementById('name').value.trim();
  const telegram = document.getElementById('telegram').value.trim();
  if(!name || !telegram) return alert("Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ø¢ÛŒØ¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");

  fetch(api, {
    method:"POST",
    body: JSON.stringify({name, telegram})
  })
  .then(r => r.text())
  .then(res => {
    document.getElementById('msg').innerText = "âœ… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!";
    getCount(); // Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´ÙˆØ¯
    document.getElementById('name').value = "";
    document.getElementById('telegram').value = "";
  })
  .catch(()=>alert("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª"));
}

window.onload = getCount; // Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
</script>

</body>
</html>
